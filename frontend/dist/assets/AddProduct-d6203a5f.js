import{r as o,k as v,P as b,j as e,Q as N,v as n}from"./index-7cf7941e.js";import{J as P}from"./jodit-react-eae9f049.js";import{_ as w}from"./index-27621bb4.js";function q(){const x=o.useRef(null),h=v(),[s,u]=o.useState([]),[c,j]=o.useState(""),[f,{isLoading:m}]=b(),g=async r=>{var p;r.preventDefault();const i=r.target.title.value,a=r.target.price.value,l=r.target.discountPrice.value;if((s==null?void 0:s.length)<=0)return n.fire("","Image is required","warning");if(!i||!a||!c)return n.fire("","All fields are required","warning");const t=new FormData;t.append("title",i),t.append("price",a),t.append("discountPrice",l),t.append("img",s[0].file),t.append("description",c);const d=await f(t);(p=d==null?void 0:d.data)!=null&&p.success?(n.fire("","Product add success","success"),r.target.reset(),u([]),h("/admin/product/all")):(n.fire("","something went wrong!","error"),console.log(d))};return e.jsxs("section",{className:"bg-base-100 shadow rounded",children:[e.jsx("div",{className:"p-4 border-b text-neutral font-medium flex justify-between items-center",children:e.jsx("h3",{children:"Add Product"})}),e.jsxs("form",{className:"p-4",onSubmit:g,children:[e.jsx("div",{className:"text-neutral-content",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsx("div",{children:e.jsx(w,{defaultValue:s,onChange:r=>u(r),dataURLKey:"data_url",children:({onImageUpload:r,onImageRemove:i,dragProps:a})=>e.jsxs("div",{className:"border rounded border-dashed p-4",...a,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"w-max px-4 py-1.5 rounded-2xl text-base-100 bg-primary cursor-pointer text-sm",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((l,t)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:l.data_url,alt:"",className:"w-24"}),e.jsx("div",{onClick:()=>i(t),className:"w-7 h-7 bg-primary rounded-full flex justify-center items-center text-base-100 absolute top-0 right-0 cursor-pointer",children:e.jsx(N,{})})]},t))})]})})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",required:!0})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Main Price"}),e.jsx("input",{type:"number",name:"price",required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Discount Price"}),e.jsx("input",{type:"number",name:"discountPrice",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Description"}),e.jsx(P,{ref:x,value:c,onBlur:r=>j(r)})]})]})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{disabled:m&&"disabled",className:"primary_btn",children:m?"Loading...":"Add Product"})})]})]})}export{q as default};
